{{ template "head" . }}

{{ template "prom_right_table_head" }}
{{ template "prom_right_table_tail" }}

{{ template "prom_content_head" . }}
<h1>Overview</h1>

<p>This is a work-in-progress console for bitcoind/lightningd.</p>

<h2>Bitcoin</h2>

<h2>Lightning</h2>

<h3>Channels</h3>

<h4>Number of channels to and from our node</h4>
<div id="ourChannelsGraph"></div>
<script>
new PromConsole.Graph({
    node: document.querySelector("#ourChannelsGraph"),
    expr: "lightningd_our_channels",
    renderer: "area",
    min: 0.0
});
</script>

<h4>Total capacity of our channels</h4>
<div id="channelCapacityGraph"></div>
<script>
new PromConsole.Graph({
    node: document.querySelector("#channelCapacityGraph"),
    expr: 'lightningd_total_channel_capacity_msatoshi{criteria=~"to_them|to_us"}/100000000000',
    renderer: "area",
    yUnits: "BTC",
    yTitle: "Capacity",
    min: 0.0
});
</script>

<h4>Number of channels on the network</h4>
<div id="numChannelsGraph"></div>
<script>
new PromConsole.Graph({
    node: document.querySelector("#numChannelsGraph"),
    expr: "lightningd_num_channels",
    renderer: "area",
    min: 0.0,
    yTitle: "Number of channels"
});
</script>

<h3>Nodes</h3>

<h4>Number of peers</h4>
<div id="numPeersGraph"></div>
<script>
new PromConsole.Graph({
    node: document.querySelector("#numPeersGraph"),
    expr: "lightningd_num_peers",
    renderer: "area",
    min: 0.0
});
</script>

<h4>Number of total known nodes on the network</h4>
<div id="numNodesGraph"></div>
<script>
new PromConsole.Graph({
    node: document.querySelector("#numNodesGraph"),
    expr: "lightningd_num_nodes",
    renderer: "area",
    min: 0.0
});
</script>

<h2>System</h2>
<h3>Node up?</h3>
<div id="upGraph"></div>
<script>
new PromConsole.Graph({
    node: document.querySelector("#upGraph"),
    expr: "up",
    renderer: "area",
    min: 0.0
});
</script>

<h3>Free memory</h3>
<div id="freeMemoryGraph"></div>
<script>
new PromConsole.Graph({
    node: document.querySelector("#freeMemoryGraph"),
    expr: "node_memory_MemAvailable",
    renderer: "line",
    min: 0.0
});
</script>

{{ template "prom_content_tail" . }}

{{ template "tail" }}
